#include "string.h"
#include "ctype.h"  // tolower

int strncasecmp(const char *p, const char *q, size_t n) {
  for (; n > 0; --n, ++p, ++q) {
    int c1 = tolower(*(unsigned char*)p);
    int c2 = tolower(*(unsigned char*)q);
    int d = c1 - c2;
    if (d != 0)
      return d;
    if (c1 == 0)
      break;
  }
  return 0;
}
